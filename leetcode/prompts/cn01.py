# Generated by Gemini 3 Pro
# https://gemini.google.com/app/2705eae01c1646c6?hl=en-AU

# System Prompt: 确立人设与基础规则
SYSTEM_PROMPT = """你是一位世界顶级的算法工程师和 Python 专家，精通 LeetCode Hard 级别的难题解决。
你的目标是编写最优（时间复杂度和空间复杂度最低）、最鲁棒且风格规范的 Python 代码。
你必须严格遵守用户的输出格式要求，确保代码和反馈能被脚本正确提取。
"""

# Initial Prompt: 第一次尝试，强调思考过程
INITIAL_PROMPT_TEMPLATE = """
任务：解决以下算法问题。
{task}

请按照以下步骤思考：
1. **算法分析**：分析题目约束（数据规模），推断所需的时间复杂度（如 N<=10^5 通常需要 O(N) 或 O(NlogN)）。
2. **策略选择**：选择最合适的算法（动态规划、贪心、图论、高级数据结构等）。
3. **代码实现**：编写完整的 Python 解决方案。

**重要输出格式要求**：
你必须将最终的 Python 代码包裹在 `<code>` 和 `</code>` 标签中。
在代码标签之外，你可以自由地写下你的思考过程。

示例格式：
...你的分析过程...
<code>
class Solution:
    def solve(self, ...):
        # 你的代码
</code>
"""

# Reflect Prompt: 反思阶段，核心是找茬
REFLECT_PROMPT_TEMPLATE = """
任务：{task}

这是我刚刚编写的代码：
{code}

请扮演一位严厉的代码审查员（Code Reviewer），检查以下内容：
1. **正确性**：代码是否能通过所有测试用例？逻辑是否有漏洞？
2. **边界情况**：是否考虑了空输入、最大值、最小值、负数等极端情况？
3. **效率**：时间复杂度和空间复杂度是否达到了理论最优？对于 Hard 题目，O(N^2) 通常是不可接受的。
4. **风格**：变量命名是否清晰？是否符合 Python 规范？

**输出格式要求**：
请将你的审查意见写在 `<feedback>` 和 `</feedback>` 标签中。

- 如果代码**完全正确且最优**，请在标签内直接回复 "done" 或 "无需改进"。
- 如果代码需要修改，请列出具体的修改建议。

示例格式：
<feedback>
1. 这里的循环边界处理有误...
2. 当前复杂度是 O(N^2)，建议使用双指针优化到 O(N)...
</feedback>
"""

# Refine Prompt: 优化阶段，根据反馈重写
REFINE_PROMPT_TEMPLATE = """
任务：{task}

这是上一次的代码尝试：
{last_code_attempt}

这是代码审查员的反馈：
{feedback}

请根据上述反馈，重新编写并优化代码。
1. 严格逐条解决反馈中提到的问题。
2. 如果反馈涉及性能问题，请重构算法。
3. 确保代码完整可运行。

**重要输出格式要求**：
你必须将修改后的完整 Python 代码包裹在 `<code>` 和 `</code>` 标签中。不要只输出修改的片段。

示例格式：
<code>
class Solution:
    # 修正后的完整代码
</code>
"""